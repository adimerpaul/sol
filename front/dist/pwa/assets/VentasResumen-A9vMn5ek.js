import{_ as g,c as v,o as b,w as a,a as e,b as t,Q as r,e as m,af as _,f,t as d,a8 as i,ay as y}from"./index-D17d9CED.js";import{Q as x}from"./QInnerLoading-Bza7ojXq.js";import{Q as p}from"./QPage-Mqie5rLH.js";import{h as c}from"./moment-BLMuvzoS.js";const h={name:"VentasResumen",data(){const l=c().format("YYYY-MM-DD");return{loading:!1,filters:{date_from:l,date_to:l},resumen:{date_from:null,date_to:null,ventas_brutas:0,costo_insumos_vendidos:0,gastos:0,utilidad_bruta:0,utilidad_neta:0}}},mounted(){this.fetchResumen()},methods:{money(l){return Number(l||0).toLocaleString("es-BO",{minimumFractionDigits:2,maximumFractionDigits:2})},setToday(){const l=c().format("YYYY-MM-DD");this.filters.date_from=l,this.filters.date_to=l,this.fetchResumen()},async fetchResumen(){this.loading=!0;try{const l={date_from:this.filters.date_from,date_to:this.filters.date_to},{data:s}=await this.$axios.get("salesResumen",{params:l});this.resumen={date_from:s.date_from,date_to:s.date_to,ventas_brutas:s.ventas_brutas||0,costo_insumos_vendidos:s.costo_insumos_vendidos||0,gastos:s.gastos||0,utilidad_bruta:s.utilidad_bruta||0,utilidad_neta:s.utilidad_neta||0}}catch{this.$q.notify?.({type:"negative",message:"No se pudo cargar el resumen de ventas"})}finally{this.loading=!1}}}},V={class:"col-6 col-sm-3"},B={class:"col-6 col-sm-3"},q={class:"col-12 col-sm-3 text-right"},Q={class:"row q-col-gutter-sm"},R={class:"col-12 col-sm-3"},w={class:"text-h6 text-bold"},C={class:"col-12 col-sm-3"},D={class:"text-h6 text-negative text-bold"},Y={class:"col-12 col-sm-3"},k={class:"text-h6 text-negative text-bold"},N={class:"col-12 col-sm-3"},S={class:"text-h6 text-positive text-bold"},M={class:"text-caption text-grey-7"},E={class:"text-body2"};function G(l,s,I,T,o,n){return b(),v(p,{class:"q-pa-sm bg-grey-3"},{default:a(()=>[e(r,{flat:"",bordered:"",class:"q-mb-sm"},{default:a(()=>[e(m,{class:"row items-end q-col-gutter-sm"},{default:a(()=>[s[2]||(s[2]=t("div",{class:"col-12 col-sm-3"},[t("div",{class:"text-h6 text-weight-bold"},"Resumen de Ventas"),t("div",{class:"text-caption text-grey-7"}," Ventas, costos y ganancias por rango de fechas ")],-1)),t("div",V,[e(_,{modelValue:o.filters.date_from,"onUpdate:modelValue":s[0]||(s[0]=u=>o.filters.date_from=u),type:"date",dense:"",outlined:"",label:"Desde"},null,8,["modelValue"])]),t("div",B,[e(_,{modelValue:o.filters.date_to,"onUpdate:modelValue":s[1]||(s[1]=u=>o.filters.date_to=u),type:"date",dense:"",outlined:"",label:"Hasta"},null,8,["modelValue"])]),t("div",q,[e(f,{color:"primary",icon:"search",label:"Actualizar","no-caps":"",loading:o.loading,onClick:n.fetchResumen,class:"q-mr-sm"},null,8,["loading","onClick"]),e(f,{outline:"",color:"primary",icon:"filter_alt_off",label:"Hoy","no-caps":"",onClick:n.setToday},null,8,["onClick"])])]),_:1})]),_:1}),t("div",Q,[t("div",R,[e(r,{flat:"",bordered:""},{default:a(()=>[e(m,{class:"q-pa-sm"},{default:a(()=>[s[3]||(s[3]=t("div",{class:"text-caption text-grey-7"},"Vendido (INGRESO)",-1)),t("div",w,d(n.money(o.resumen.ventas_brutas))+" Bs ",1)]),_:1})]),_:1})]),t("div",C,[e(r,{flat:"",bordered:""},{default:a(()=>[e(m,{class:"q-pa-sm"},{default:a(()=>[s[4]||(s[4]=t("div",{class:"text-caption text-grey-7"}," Costo insumos vendidos ",-1)),t("div",D,d(n.money(o.resumen.costo_insumos_vendidos))+" Bs ",1)]),_:1})]),_:1})]),t("div",Y,[e(r,{flat:"",bordered:""},{default:a(()=>[e(m,{class:"q-pa-sm"},{default:a(()=>[s[5]||(s[5]=t("div",{class:"text-caption text-grey-7"}," Gastos / Egresos ",-1)),t("div",k,d(n.money(o.resumen.gastos))+" Bs ",1)]),_:1})]),_:1})]),t("div",N,[e(r,{flat:"",bordered:""},{default:a(()=>[e(m,{class:"q-pa-sm"},{default:a(()=>[s[8]||(s[8]=t("div",{class:"text-caption text-grey-7"},"Ganancia neta",-1)),t("div",S,d(n.money(o.resumen.utilidad_neta))+" Bs ",1),t("div",M,[s[6]||(s[6]=i(" (Utilidad bruta: ",-1)),t("b",null,d(n.money(o.resumen.utilidad_bruta))+" Bs",1),s[7]||(s[7]=i(") ",-1))])]),_:1})]),_:1})])]),e(r,{flat:"",bordered:"",class:"q-mt-sm"},{default:a(()=>[e(m,{class:"q-pa-sm"},{default:a(()=>[t("div",E,[s[9]||(s[9]=i(" Entre ",-1)),t("b",null,d(o.resumen.date_from||"-"),1),s[10]||(s[10]=i(" y ",-1)),t("b",null,d(o.resumen.date_to||"-"),1),s[11]||(s[11]=i(" vendiste ",-1)),t("b",null,d(n.money(o.resumen.ventas_brutas))+" Bs",1),s[12]||(s[12]=i(", gastaste ",-1)),t("b",null,d(n.money(o.resumen.costo_insumos_vendidos+o.resumen.gastos))+" Bs",1),s[13]||(s[13]=i(" (insumos + egresos) y tu ganancia neta fue de ",-1)),t("b",null,d(n.money(o.resumen.utilidad_neta))+" Bs",1),s[14]||(s[14]=i(". ",-1))])]),_:1})]),_:1}),e(x,{showing:o.loading},{default:a(()=>[e(y,{size:"40px"})]),_:1},8,["showing"])]),_:1})}const L=g(h,[["render",G]]);export{L as default};
